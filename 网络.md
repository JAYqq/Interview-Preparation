1. HTTPS原理

   HTTPS是通过对称和非对称加密技术共同实现的加密传输协议

   过程是：

   - 服务端向第三方机构申请证书，数字证书=网站信息+数字签名

     第三方将网站信息（信息中包含服务端的公钥）加密后(数字摘要算法)，然后第三方用自己的私钥加密证书中已经加密过的网站信息。最后给到服务端

   - 客户端向服务端申请证书，服务端用第三方公钥进行加密

   - 客户端拿到证书以后用向第三方申请的公钥（很多浏览器已经在本地储存了常见第三方的公钥）解密数字签名，验证合法性：合法性就是客户端拿到证书以后第三方公钥解密出加密过的网站信息，然后用同样的数字加密算法重新加密网站信息，查看两者是否相等。

   - 如果合格，客户端生成秘钥，然后用服务端的公钥加密后发送给服务端

   - 服务端收到后用自己的秘钥非对称解密，得到客户端秘钥，然后客户端用秘钥进行数据加密传输。

2. http和https的区别

   - http是一种明文传输协议，而https是在http的基础上进行了加密

3. TCP 协议如何保证可靠传输

   - **校验和**： TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。

   - **流量控制**： TCP 连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据（这个叫做窗口大小，放在TCP头部窗口字段）。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议。（这里还有一个ACK和窗口大小的合并，这样不用分成两个包来传输了，提高了效率）。并不是每次发送一个发送窗口大小的数据，而是发送MSS，所以这个MSS可能会比发送窗口小

   - **拥塞控制**： 当网络拥塞时，减少数据的发送。

     涉及到整个网络的拥塞情况，并作为一个拥塞窗口(cwnd)的状态变量，放入TCP头部中实现拥塞控制。发送窗口大小=min(接收方窗口大小，拥塞窗口大小)，主要算法有：

     - 慢开始

       较好的方法是先探测一下，即由小到大逐渐增大发送窗口，也就是由小到大逐渐增大拥塞窗口数值。cwnd初始值为1，每经过一个传播轮次，cwnd加倍。

     - 拥塞避免

       拥塞避免算法的思路是让拥塞窗口cwnd缓慢增大，即每经过一个往返时间RTT就把发送放的cwnd加1.

     - 快重传与快恢复（FRR）

       停止等待协议中超时重传需要一个定时器的时间，这段时间没有新的数据包发送。有了 FRR，如果接收机接收到一个不按顺序的数据段，它会立即给发送机发送一个重复确认。如果发送机接收到三个重复确认，它会假定确认件指出的数据段丢失了，并立即重传这些丢失的数据段

       ![img](https://upload-images.jianshu.io/upload_images/3256507-d97c8b1425c23a6e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1174/format/webp)

   - **停止等待协议**: 也是为了实现可靠传输的，它的基本原理就是每发完一个分组就- 停止发送，等待对方确认。在收到确认后再发下一个分组。 超时重传： 当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。

4. 滑动窗口

   滑动窗口是在吞吐量和发送数据的有序性上面做了一个兼并，也就是不需要每发送一个包就等待它的ACK，而是可以连续发送多个包，只需要收到最后一个序号的确认报就表示前面的包都收到了。但是如果前面有包没有收到，那么滑动窗口发送完一个窗口大小后就会停止等待，直到超时重传，收到了这个包的确认报之后才会往后滑动，这样保证了窗口之前的数据包都是已经被成功发送的数据包。

   另外发送窗口的大小也需要根据具体情况做出改变，发送窗口大小=min(接收方窗口大小，拥塞窗口大小)